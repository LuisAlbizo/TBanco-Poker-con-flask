{% extends 'base.html' %}

{% block head %}
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1,0">
	<link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
	<script src="/static/js/jquery.js"></script>
	<script src="/static/bootstrap/js/bootstrap.min.js"></script>
	<script src="/static/js/cuenta.js"></script>
	
	<style>
		body {
			background-image: url("/static/imagenes/qlo_verde.jpg");
			background-attachment: fixed;
			background-size: 100vw 100vh;
			padding-top:50px;
		}

		header {
			margin-bottom:30px;
		}

		ul {
			list-style:none;
		}

		li {
			margin-top:10px;
		}

		p {
			margin-top:30px;
		}

	</style>

	<script>
		$(document).ready(function(){
			var cuenta_data = {{ cuenta.__json__()|tojson|safe }};
		});
	</script>
	
	<title>Informacion de Cuenta</title>
{% endblock %}

{% block content %}
	{% if cuenta %}
	<header class="container">
		<div class="row">
			<nav class="col-xs-12 navbar navbar-default navbar-fixed-top">
				<div class="container-fluid">
					<div class="navbar-header">
						<button class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu-header">
							<span class="sr-only">Menu</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>

						<span class="navbar-brand">
							<span class="glyphicon glyphicon-user"></span> {{ cuenta.getID() }}
						</span>
					</div>

					<div class="collapse navbar-collapsed" id="menu-header">
						<ul class="navbar navbar-nav">
							<li><a id="logout" href="/logout">
								<span class="glyphicon glyphicon-log-out"></span> Salir de mi cuenta
							</a></li>
							<li><a id="home" href="/">
								<span class="glyphicon glyphicon-home"></span> Pagina principal
							</a></li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
	</header>

	<section class="container">
		<article class="table-responsive">
			<table class="table table-bordered table-hover">
				<h2 class="text-center">Monedas: {{ nmonedas }}</h2>
				<thead>
					<tr class="info">
						<th>Valor</th>
						<th>Expiracion</th>
						<th>Tiempo activa</th>
						<th>ID</th>
					</tr>
				</thead>
				<tfoot>
					<tr>
						<td colspan="4" class="text-center">Saldo: <i>{{cuenta.getSaldo()["valor"]}}</i></td>
					</tr>
				</tfoot>
				<tbody>
					{% for moneda in cuenta.getSaldo()["monedas"] %}
					<tr class="moneda">
						<td>{{moneda.consultarValor()}}</td>
						<td>{{moneda.consultarExpiracion()}}</td>
						<td>{{moneda.tiempoActiva()}}</td>
						<td>{{moneda.getID()}}</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>

			<form id="paginas" action="">
				<div class="input-group">
					<span class="input-group-btn">
						<button class="btn btn-primary">
							<span class="glyphicon glyphicon-chevron-left"></span> Anterior
						</button>
					</span>
					<input type="number" class="form-control" 
						min="1" 
						max="{{ npages }}" 
						value="1">
					<span class="input-group-btn">
						<button class="btn btn-primary">
							Siguiente <span class="glyphicon glyphicon-chevron-right"></span>
						</button>
					</span>
				</div>
			</form>

		</article>
	</section>
	{% else %}
	<header class"container">
		<h1>La cuenta: {{ cuentaID }} no existe</h1>
		<p class="text-center">
			<a href="/"><span class="glyphicon glyphicon-home"></span> Pagina principal</a>
		</p>
	</header>
	{% endif %}
{% endblock %}
